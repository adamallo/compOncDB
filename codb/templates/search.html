{{define "search"}}
{{template "header"}}
<script type=text/javascript src="/static/addFields.js"></script>
{{if .User}}
  <div><small>
    <span class="left">Last Updated: {{.Update}}</span>
    <span class="right">User: {{.User}} | <a href="/codb/changepassword">Change Password</a> | <a href="/codb/logout">Logout</a></span>
  </small></div>
  </br>
<hr>
{{end}}
  {{if .Flash}}
    <div class="flash">{{.Flash}}</div>
  {{end}}
<section>
  <h1>Search Database</h1>
  <form method="POST" action="/codb/results/">
    <p>Enter the name of table containing target value, the columns containing the value, the operation to perform, and the value to search for. 
See <a href="/static/databaseSchema.pdf" target="_blank">this diagram</a> for column names.</p>
    <div id="SearchBlock">
      <body onload="newSearch('SearchBlock');"></body>
    </div>
    <div id="addSearch">
      <input type="button" value="Add new search" onClick="newSearch();">
    </div>
    <p>Note: Additional search parameters are cumulative and all fields will be applied together. 
New searches, on the other hand, are completely independent of one another.</p>
    <hr>
    <div>
      <label for="Table">Perform operations on this table only:</label>
      <select id="Table" name="Table">
        <option name="Table" value="" selected="selected"></option>
      </select>
    </div>
    <div>
      <input type="checkbox" name="Dump">
      <label for="Dump">Extract entire target table.</label>
    </div>
    <div>
      <input type="checkbox" name="Summary">
      <label for="Summary">Compile basic summary statistics of the database.</label>
    </div>
    <div>
      <input type="checkbox" name="Cancerrate">
      <label for="Cancerrate">Calculate cancer rates for species with greater than min entries.</label>
    </div>
    <hr>
    <div>
      <label for="Min">The minimum number of entries required to examine a species:</label>
      <input type="number" name="Min" min="0" value="50">
    </div>
    <div>
      <input type="checkbox" name="Necropsy">
      <label for="Necropsy">Extract only necropsy records (extracts all matches by default).</label>
    </div>
    <div>
      <input type="checkbox" name="Infant">
      <label for="Infant">Include infant records in results (excluded by default).</label>
    </div>
    <div>
      <input type="checkbox" name="Count">
      <label for="Count">Return count of target records instead of printing entire records.</label>
    </div>
    <button type="submit">Submit</button>
  </form>
</section>
{{template "footer"}}
{{end}}
